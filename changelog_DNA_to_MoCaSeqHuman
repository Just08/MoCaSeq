INFOS:
  -TUMOR only kann nur Copywriter!
  -TITAN can not be run on SS, because it neets LOH from Mutect2



TODO:
  -alles mit #TODO in code
  - docker install R packages
  - for purity use: --output $name/results/Mutect2/"$name".m2.filt.vcf
  - from segment.Rdata to Copywriter.seg

  - hardcoded "		--vcf-normal-id Normal --vcf-tumor-id Tumor \" in SNV_RunVEP.sh
  - check if large files were downloaded (e.g. dbNSFP4.1a.zip in GenerateHumanDB)
  - remove unmapped reads (to avoid "Mapq Should Be 0 For Unmapped Read")



FRAGEN:

- GENOTYPING: smb://imostorage.med.tum.de/fastq/Studies/AGRad_mCRCOrganoids/NSG425_T4/results/Genotype
  --> why double lines with different ratios?

- Strelka Postprocessing III (Extracting allele frequencies): added cache_version 96 (by grep) and --dir


CHANGELOG:

7)
SNV_Signatures.R:
  - library load messages suppressed
  - changed hardcoded bg genome

6)
SNV_StrelkaPostprocessing: adding cache_version 96 and --dir works fixes the "ERROR: No cache found for homo_sapiens, version 95" error

Preparation_HumanDatabases: changed ftp://dbnsfp:dbnsfp@dbnsfp.softgenetics.com/dbNSFPv3.5a.zip to dbNSFP4.1a.zip

5)
added elif [ $input_format = 'Manta' ] to SNV_RunVep
vcf2maf.pf has a bug! the hash values are empty for: $info{CHR2}:$info{END}-$info{END}
this can be fixed with
$info{"CHR2"} = $cols[0];
$info{"END"} = $cols[1];
#print map { "$_ => %info{$_}\n" } keys %info;
#print "\n";

4)
added error catch: stop if fastQC was not successful (else phred score grep can be wrong)

3)
improved text in command line usage print and readme

2)
added code for BubbleTree

added "garbage <- " to all dev.off commands to prevent the ugly "null device" output

fixed install issue by adding "ADD /data/resources /data/resources" to Dockerfile to find local R packages

1)

added FACETS and ABSOLUTE to the pipeline

replaced library(X) in multiple Rscripts by suppressPackageStartupMessages(library(X))

CNV_MapSegmentsToGenes.R
  - added suppressWarnings to findOverlaps to prevent warnings ("2 combined objects have no sequence levels in common")
  - replaced deprecated tbl_df(cnv) %>% mutate_each(as.character) INTO cnv=tibble::as_tibble(cnv) %>% mutate_all(as.character)

CNV_CleanUp.sh completly removed and replaced by one-liner (which is species independent)

bugfix in SNV_Mutect2Postprocessing.sh:
  - gatk.jar IndexFeatureFile corrected from -V to -input
  - added $type to SNV_CleanUp.sh (not needed for MS, but for consistency)

bugfix in SNV_Cleanup:
  - for MS, name changed from .m2.filt.filtered.selected.vcf to .m2.filt.selected.vcf
  - rm vcf.idx (we need that index)
  - added species to catch file not found for ann1, ... (human specific)

change in MoCaSeq.sh:
  -large for loop to remove trimmed fastqs replaced by nice find del one-liner
  -# removed the "-z ...txt" since it should be "! -f" to work and therefore was not used anyways (at Reference files found section)

change in SNV_RunVEP.sh:
  - added --dir_cache $cache_dir to if [ $input_format = 'Mutect2' ] ...
  - fixed multiple instances of ".vep.tmp" to the correct ".vep.maf.tmp"
  - removed --polyphen b AND --af_gnomad because of errors (maybe put it back for human soon): ERROR:PolyPhen not available, ERROR:gnomAD data is not available in this cache





  DOCKER BUILD:
  - added
    - (SNPchip, XML, devEMF were outsourced from the biocmanager installation bundle)
    -devtools::install_github("mskcc/facets", build_vignettes = F)
    -devtools::install_github("mskcc/pctGCdata")
    -install.packages("numDeriv")
    -install.packages("/opt/MoCaSeq/data/resources/ABSOLUTE_1.0.6.tar.gz",repos=NULL,type="source")
    -install.packages("XML", repos = "http://www.omegahat.net/R")
    -install.packages("https://cran.r-project.org/src/contrib/Archive/ff/ff_2.2-14.tar.gz",repos=NULL)
    -BiocManager::install("SNPchip")
    -devtools::install_version("devEMF", version = "4.0", repos = "http://cran.us.r-project.org")
  -added -g++ -std=c++11 /usr/local/lib/R/site-library/facets/extcode/snp-pileup.cpp -lhts -o /usr/local/lib/R/site-library/facets/extcode/snp-pileup



  ERRORS:
  - deeptools 3.5.0 requires matplotlib>=3.1.0, but you'll have matplotlib 2.2.5 which is incompatible
  - Failed with error:  ‘there is no package called ‘shiny’’
